# æ—…æ¸¸çŸ­è§†é¢‘å™äº‹å†…å®¹ Ã— å™äº‹è¯è¯­  
å¤šæ¨¡æ€é‡åŒ–å·¥å…·é›†

> **å­ä»»åŠ¡**ï¼šNarrative Content & Narrative Discourse å˜é‡çš„å¤§æ ·æœ¬è‡ªåŠ¨é‡åŒ–

---

## ğŸ“š ç†è®ºæ¡†æ¶ä¸å˜é‡ä½“ç³»

| èŒƒç•´ | å˜é‡ | ç ”ç©¶å®šä¹‰ |
|------|------|----------|
| **Narrative Content**<br/>(å™äº‹å†…å®¹) | **æƒ…èŠ‚é€»è¾‘æ€§** Plot Logicality | äº‹ä»¶ / åœºæ™¯ / åŠ¨ä½œçš„å› æœé“¾ä¸æ—¶é—´çº¿æ˜¯å¦æ¸…æ™°ã€å®Œæ•´ã€è‡ªç„¶ |
| | **æ„ŸçŸ¥çœŸå®æ€§** Perceived Authenticity | è¡¨ç°å½¢å¼ä¸ç»†èŠ‚ç»™äºˆç”¨æˆ·çš„çœŸå®æ„Ÿã€å¯ä¿¡åº¦ |
| | **å†…å®¹ä»·å€¼å–å‘** Value Orientation | å¯¼å‘åŠŸåˆ©ï¼ˆå®ç”¨æ”»ç•¥ï¼‰ã€æƒ…æ„Ÿï¼ˆæ²»æ„ˆ/å…±é¸£ï¼‰ã€ä½“éªŒï¼ˆæ²‰æµ¸/æŒ‘æˆ˜ï¼‰ã€æˆ–å…¶ä»–ï¼ˆæ™¯è§‚å±•ç¤º/æ–‡åŒ–ç§‘æ™®/ä¸ªäººæˆé•¿â€¦ï¼‰ |
| **Narrative Discourse**<br/>(å™äº‹è¯è¯­) | **è§†è§’** Perspective | æ–‡æœ¬äººç§°ã€é•œå¤´æ‹æ‘„ã€è§£è¯´ç«‹åœºã€æ’­æ”¾å½¢æ€ç­‰å¤šå±‚é¢ |
| | **èŠ‚å¥** Rhythm | éŸ³ä¹èŠ‚æ‹ã€å‰ªè¾‘å¯†åº¦ã€è¿åŠ¨å¯†åº¦ã€éŸ³ç”»åŒæ­¥å…±åŒå†³å®šçš„æ•´ä½“èŠ‚å¥å¿«æ…¢ |
| | **ç»“æ„å½¢æ€** Structural Form | å•å…ƒå¼ï¼ˆæ¾æ•£ç‰‡æ®µï¼‰ / è¿ç»­å¼ï¼ˆä¸€æ°”å‘µæˆï¼‰ / ç¦»æ•£å¼ï¼ˆå¼ºæ–­è£‚æ„Ÿï¼‰ |
| | **ä½“è£** Genre | Vlog / æ”»ç•¥ / åˆé›† / è§£è¯´ / æˆå‰§åŒ–çŸ­å‰§ç­‰ |
| | **æˆå‰§æ€§** Dramatic Quality | æ‚¬å¿µã€åè½¬ã€é«˜æ½®ã€å†²çªç­‰æˆå‰§å…ƒç´ ä½“ç°åº¦ |
| | **è¯­è¨€é£æ ¼** Linguistic Style | åŠŸèƒ½å‹ / æƒ…æ„Ÿå‹ / æ„è±¡å‹ / æ··åˆ |

---
## ç¯å¢ƒä¸å®‰è£…

conda create -n travel_narrative python=3.9
conda activate travel_narrative
pip install -r requirements.txt


## é¡¹ç›®ç»“æ„
data/
â”œâ”€â”€ videos/*.mp4
â””â”€â”€ texts/total.csv          # video_id,text

output/                      # ç»“æœè¡¨ & å¯è§†åŒ–
cache/                       # ä¸­é—´ç¼“å­˜

code/
â”œâ”€â”€ perspective/             # è§†è§’å››ç»´å­æ¨¡å—
â”‚   â”œâ”€â”€ 01a_text_pov.py      # äººç§°è§†è§’ï¼ˆæ–‡æœ¬ï¼‰
â”‚   â”œâ”€â”€ 01b_character_pov.py # äººç‰©è§†è§’ï¼ˆå‡ºé•œ/ä¸»è§‚é•œå¤´ï¼‰
â”‚   â”œâ”€â”€ 01c_presentation.py  # å‘ˆç°è§†è§’ï¼ˆè§£è¯´/æ—ç™½ï¼‰
â”‚   â””â”€â”€ 01d_playback.py      # æ’­æ”¾è§†è§’ï¼ˆç«–å±/ç”»ä¸­ç”»â€¦ï¼‰
â”œâ”€â”€ 02_rhythm.py
â”œâ”€â”€ 03_structure.py
â”œâ”€â”€ 04_genre.py
â”œâ”€â”€ 05_drama.py
â”œâ”€â”€ 06_lang_style.py
â”œâ”€â”€ 07_plot_logic.py
â”œâ”€â”€ 08_authenticity.py
â””â”€â”€ 09_value_orient.py

README.md



## ä¸»è¦åŠŸèƒ½æ¨¡å—
### 4.1 è§†è§’ Perspective
| ç»´åº¦                              | å­ç±»å‹ / å­—æ®µ                                                                                         | è‡ªåŠ¨æå–æ–¹æ³•                                                |
| ------------------------------- | ------------------------------------------------------------------------------------------------ | ----------------------------------------------------- |
| **äººç§°è§†è§’**<br/>(Text POV)         | `first_person_ratio` (æˆ‘/æˆ‘ä»¬) <br/>`second_person_ratio` (ä½ /ä½ ä»¬) <br/>`third_person_ratio` (ä»–/å¥¹/ä»–ä»¬) | æ–‡æ¡ˆ Jieba åˆ†è¯ â†’ ä»£è¯ç»Ÿè®¡ï¼›æ”¯æŒç¥ˆä½¿å¥æ£€æµ‹(`imperative_count`)        |
| **äººç‰©è§†è§’**<br/>(Character POV)    | `subjective_cam_ratio` ä¸»è§‚é•œå¤´æ¦‚ç‡ <br/>`onscreen_host_ratio` å‡ºç°ä¸»è®²äººæ¯”ä¾‹                                 | OpenCV + å¤´éƒ¨è¿åŠ¨/è§†çº¿ç‰¹å¾æ£€æµ‹ï¼›MTCNN / face\_recognition ç»Ÿè®¡å‡ºé•œå¸§æ•° |
| **å‘ˆç°è§†è§’**<br/>(Presentation POV) | `narration_type`âˆˆ{**æ¼”ç»è§£è¯´**/ **äº²å†ç‹¬ç™½**/ **å¤šæ–¹å¯¹è¯**} <br/>`voice_over_ratio`                          | éŸ³è½¨ VAD + STT åˆ†æè¯´è¯äººæ•°é‡ï¼›æ–‡æœ¬è¯­æ°”åˆ†ç±»                           |
| **æ’­æ”¾è§†è§’**<br/>(Playback POV)     | `orientation`âˆˆ{ç«–å±,æ¨ªå±} <br/>`split_screen` bool <br/>`picture_in_picture` bool                    | è§£æåˆ†è¾¨ç‡/é»‘è¾¹æ¯”ä¾‹ï¼›æ£€æµ‹å¤šå®«æ ¼ã€ç”»ä¸­ç”»å¸§å¸ƒå±€                               |


##### æµç¨‹

è¯»å–æ–‡æ¡ˆ â†’ Jieba åˆ†è¯ â†’ ç»Ÿè®¡äººç§° pronounã€‚

è§†é¢‘å…¥å¸§ â†’ æ£€æµ‹ FOV & å¤´éƒ¨è¿åŠ¨ â†’ ä¸»è§‚é•œå¤´æ¦‚ç‡ã€‚

éŸ³è½¨ â†’ VAD(Voice Activity Detection) + STT(è‹¥å¯ç”¨) â†’ è®²è§£ / å¯¹è¯åˆ¤åˆ«ã€‚

æ±‡æ€»å¾—åˆ†ï¼Œç”Ÿæˆ perspective.csv.

### 4.2 èŠ‚å¥ Rhythm
| ç¼©å†™             | å­—æ®µ    | è¯´æ˜                                        | èŒƒå›´       |
| -------------- | ----- | ----------------------------------------- | -------- |
| BPM            | `bpm` | éŸ³é¢‘èŠ‚æ‹                                      | 0-200 Hz |
| CPS            | `cps` | Cuts per Secondï¼Œå‰ªè¾‘å¯†åº¦                      | 0-2      |
| MDI            | `mdi` | Motion Density Indexï¼Œè¿åŠ¨å¯†åº¦                 | 0-100    |
| SAS            | `sas` | Sound-Action Sync                         | 0-1      |
| NRI            | `nri` | **Narrative Rhythm Index**<br/>(å››æŒ‡æ ‡å½’ä¸€åŒ–å‡å€¼) | 0-1      |
| `rhythm_class` | 0/1/2 | æ…¢/ä¸­/å¿«                                     |          |

##### ç®—æ³•

ffmpeg âœ 8 kHz mono éŸ³è½¨ âœ librosa.beat_track() â†’ BPMã€‚

opencv æŠ½å¸§(fps = 2) âœ å¸§å·® > 30 è®¡ä¸€æ¬¡å‰ªè¾‘ â†’ CPSã€‚

å¸§å…‰æµ + ç°åº¦å·®è· â†’ MDIã€‚

éŸ³é¢‘ onsets â†” åœºæ™¯åˆ‡æ¢æ—¶é—´å·® < 0.1 s è®°ä¸€æ¬¡åŒæ­¥ â†’ SASã€‚

å››è€… min-max å½’ä¸€åŒ– â†’ nri â†’ é˜ˆå€¼ 0.33/0.66 åˆ’ä¸‰æ¡£ã€‚

### 4.3 ç»“æ„å½¢æ€ Structural Form
| æ ‡ç­¾             | code | åˆ¤å®šé˜ˆå€¼ï¼ˆå¹³å‡ç›¸ä¼¼åº¦ï¼‰ |
| -------------- | ---- | ----------- |
| å•å…ƒå¼ Unit       | `0`  | 0.50â€“0.80   |
| è¿ç»­å¼ Continuous | `1`  | > 0.80      |
| ç¦»æ•£å¼ Discrete   | `2`  | < 0.50      |

##### æ­¥éª¤

PySceneDetect â†’ è·å–åœºæ™¯ç‰‡æ®µ min(MIN_SEG=3)ã€‚

æ¯æ®µä¸­å¿ƒå¸§ â†’ ResNet-50 avg-pool ç‰¹å¾ï¼ˆ2048 dï¼‰ã€‚

ç›¸é‚»ç‰‡æ®µ cosine_similarity â†’ mean_simã€‚

å¯¹ç…§é˜ˆå€¼ â†’ structure_labelã€‚

ç»“æœæŒä¹…åŒ– & ç¼“å­˜ (cache/*_features.npy).

### 4.4 ä½“è£ Genre
| ä½“è£   | å…³é”®è¯/ç‰¹å¾                | èåˆæƒé‡ (text/vision/audio/scene) |
| ---- | --------------------- | ------------------------------ |
| è¡Œç¨‹æ”»ç•¥ | è¡Œç¨‹ã€è·¯çº¿ã€æ”»ç•¥â€¦ + åœ°å›¾/è·¯ç‰Œ     | 0.6/0.3/0.1/â€”                  |
| æ–‡åŒ–è§£è¯´ | å†å²ã€ä¼ è¯´ã€åšç‰©é¦†â€¦ + é—è¿¹/å±•å“    | 0.6/0.3/0.1/â€”                  |
| ç¾é£Ÿæ¢åº— | ç¾é£Ÿã€é¤å…â€¦ + Food-Closeup | 0.2/0.6/0.2/â€”                  |
| ä½“éªŒå™äº‹ | ä½“éªŒã€è®°å½•â€¦ + ç¬¬ä¸€è§†è§’         | 0.5/0.3/0.2/â€”                  |
| æƒ…æ„ŸæŠ’å‘ | æ„Ÿæ‚Ÿã€æ¸©æš–â€¦ + èˆ’ç¼“éŸ³ä¹         | 0.8/0.1/0.1/â€”                  |
| å¿«é—ªå‰ªè¾‘ | å¿«é—ªã€é«˜èƒ½â€¦ + é«˜CPS/BPM     | 0.2/0.6/0.2/scene              |
Pipelineï¼šæ–‡æœ¬ analyze_text() â–¶ è§†è§‰ ResNet â†’ ç‰¹å¾åŒ¹é… â–¶ éŸ³è½¨ tempo/å£°çº¹ â–¶ åœºæ™¯åˆ‡æ¢ â†’ åŠ æƒå†³ç­– â†’ genre_labels + confidence_scores.

### 4.5 æˆå‰§æ€§ Dramatic Quality
| å˜é‡             | å­—æ®µ                   | æ¥æº   |
| -------------- | -------------------- | ---- |
| `has_suspense` | æ‚¬å¿µå…³é”®è¯ + å‡ºç°ä½ç½®         | æ–‡æœ¬   |
| `has_surprise` | æ„å¤–å…³é”®è¯ + æƒ…æ„Ÿè·³è·ƒ         | æ–‡æœ¬   |
| `vis_score`    | è§†è§‰å˜åŒ– & å¿«åˆ‡            | è§†é¢‘   |
| `audio_score`  | RMS/è°±è´¨å¿ƒ/å¯¹æ¯”åº¦ç»¼åˆ        | éŸ³é¢‘   |
| `drama_label`  | {0:æ— ,1:æ‚¬å¿µ,2:æ„å¤–,3:åŒé‡} | ç»¼åˆå†³ç­– |
é˜ˆå€¼å¯å€ŸåŠ© DramaThresholdOptimizer è‡ªåŠ¨ä¼˜åŒ– (Grid/Random Search).

### 4.6 è¯­è¨€é£æ ¼ Linguistic Style
| style\_code | style\_name    | åˆ¤å®šé€»è¾‘                |
| ----------- | -------------- | ------------------- |
| `0`         | åŠŸèƒ½å‹ Functional | é¢„ç®—/äº¤é€š/å¹²è´§å…³é”®è¯â‰¥é˜ˆå€¼      |
| `1`         | æƒ…æ„Ÿå‹ Emotional  | ç½‘ç»œæµè¡Œæ„Ÿå¹è¯ + Emoji/æ„Ÿå¹å· |
| `2`         | æ„è±¡å‹ Imagery    | å¥é•¿<5 or çº¯è¡¨æƒ…/é£æ™¯è¯—æ„    |
| `3`         | æ··åˆå‹ Mixed      | ä»»ä¸¤ç±»æ¯”ä¾‹å·® < 0.1        |
å­—æ®µï¼šratio_functional, ratio_emotional, ratio_imagery, mixed_type.

### 4.7 æƒ…èŠ‚é€»è¾‘æ€§ Plot Logicality
| å­—æ®µ                  | æè¿°                                   |
| ------------------- | ------------------------------------ |
| `event_count`       | æ–‡æœ¬äº‹ä»¶æŠ½å–æ•°é‡                             |
| `causal_links`      | æŠ½å–å› æœå¯¹æ•°                               |
| `logic_score` (0-1) | `causal_links / event_count` \* è°ƒæ•´ç³»æ•° |
| `logic_level`       | {0:å¼±,1:ä¸­,2:å¼º} æŒ‰ 0.3/0.6 é˜ˆå€¼           |
å®ç°ï¼šspacy + HanLP äº‹ä»¶æŠ½å– âœ temporal cue & è¿è¯ç»Ÿè®¡ âœ ç®€æ˜“å› æœåˆ¤åˆ«ã€‚
è‹¥äº‹ä»¶<3ï¼Œåˆ™é»˜è®¤ä¸ºå¼±é€»è¾‘ã€‚

### 4.8 æ„ŸçŸ¥çœŸå®æ€§ Perceived Authenticity
| ä¿¡å·                | é‡‡æ ·                           | è´¡çŒ®æƒé‡ |
| ----------------- | ---------------------------- | ---- |
| æ–‡æœ¬ä¸€æ‰‹ä½“éªŒè¯ (`äº²æµ‹/å®å½•`) | Regex                        | 0.4  |
| ç”»é¢åŸå£°ç‡ (`åŸå£°è½¨/ç¯å¢ƒéŸ³`) | `audio.is_speech` vs `music` | 0.3  |
| æ‰‹æŒæŠ–åŠ¨/å™ªç‚¹ (éå¤§ç‰‡è´¨æ„Ÿ)   | `Gyro blur metric`           | 0.3  |

### 4.9 å†…å®¹ä»·å€¼å–å‘ Value Orientation
| å–å‘              | å…³é”®è¯ç°‡        | ç‰¹å¾      |
| --------------- | ----------- | ------- |
| åŠŸåˆ© Utilitarian  | çœé’±ã€æ”»ç•¥ã€å¿…å»ã€æ’é˜Ÿ | æ–‡æœ¬+åŠŸèƒ½ç‰¹å¾ |
| æƒ…æ„Ÿ Hedonic      | æ²»æ„ˆã€æ„ŸåŠ¨ã€å¹¸ç¦ã€æµªæ¼« | æ–‡æœ¬æƒ…æ„Ÿå€¾å‘  |
| ä½“éªŒ Experiential | ä½“éªŒã€è®°å½•ã€æŒ‘æˆ˜ã€æ‰“å¡ | æ–‡æœ¬+ç¬¬ä¸€è§†è§’ |

## å¼•ç”¨ä¸è‡´è°¢
PySceneDetectã€Librosaã€TorchVisionã€Jieba ç­‰å¼€æºé¡¹ç›®
